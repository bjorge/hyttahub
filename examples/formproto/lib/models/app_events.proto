syntax = "proto3";

package hyttahub.example.formproto;

message AppEvent {

  message UpdateText { string text = 1; }

  oneof event { UpdateText updateText = 1; }
}

// The SubmitAppEvent is passed to the submit bloc handler
// PII (ex. email) is allowed in this message since not stored to immutable
// records
message SubmitAppEvent {
  // the final site event will contain this app event
  message SiteEvent {
    int32 version = 1; // the version of the event, required
    int32 author = 2;  // filled in by the app submit bloc
  }

  AppEvent appEvent = 1;   // the event to store in immutable records, required
  SiteEvent siteEvent = 2; // the version of the event, required
  string authorEmail = 3;  // the author's email, required
}

// The AppEventRecord is a representation of the actual record stored in the
// database This record is used just for display purposes in the client
message AppEventRecord {
  string isoDate = 1;
  int32 version = 2;
  AppEvent appEvent = 3;
}